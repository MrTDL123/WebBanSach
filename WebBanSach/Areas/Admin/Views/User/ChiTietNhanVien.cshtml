@model Media.Models.NhanVien
@{
    ViewData["Title"] = "Chi Tiết Nhân Viên";
    Layout = "~/Areas/Admin/Views/Shared/_AdminLayout.cshtml";
}

<div class="space-y-6">
    <!-- Header -->
    <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4">
        <div class="space-y-2">
            <h1 class="text-3xl font-bold text-gray-900 dark:text-white bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">
                Chi Tiết Nhân Viên
            </h1>
            <p class="text-gray-600 dark:text-gray-400 text-lg">Thông tin chi tiết và quản lý nhân viên</p>
        </div>
        <div class="flex gap-3">
            <a href="@Url.Action("QuanLyNguoiDung")" class="bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 font-semibold py-3 px-6 rounded-xl transition-all duration-300 hover:shadow-lg hover:scale-105 transform flex items-center gap-2">
                <i class='bx bx-arrow-back'></i>
                Quay lại
            </a>
            <a href="@Url.Action("SuaNhanVien", new { id = Model.MaNhanVien })" class="bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white font-semibold py-3 px-6 rounded-xl transition-all duration-300 hover:shadow-lg hover:scale-105 transform flex items-center gap-2">
                <i class='bx bx-edit'></i>
                Chỉnh sửa
            </a>
        </div>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
        <!-- Main Information -->
        <div class="lg:col-span-2 space-y-6">
            <!-- Personal Information -->
            <div class="bg-gradient-to-br from-white to-blue-50 dark:from-gray-800 dark:to-blue-900/20 rounded-2xl shadow-2xl border border-blue-100/50 dark:border-blue-800/30 overflow-hidden">
                <div class="px-6 py-4 bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600">
                    <div class="flex items-center gap-3">
                        <div class="p-2 bg-white/20 rounded-xl backdrop-blur-sm border border-white/30">
                            <i class='bx bx-user text-xl text-white'></i>
                        </div>
                        <div>
                            <h2 class="text-xl font-bold text-white">Thông Tin Cá Nhân</h2>
                            <p class="text-blue-100 text-sm">Thông tin chi tiết nhân viên</p>
                        </div>
                    </div>
                </div>
                <div class="p-6">
                    <div class="flex items-center gap-4 mb-6">
                        <div class="w-20 h-20 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg">
                            <i class='bx bx-user text-3xl text-white'></i>
                        </div>
                        <div>
                            <h3 class="text-2xl font-bold text-gray-900 dark:text-white">@Model.HoTen</h3>
                            <div class="flex flex-wrap gap-2 mt-2">
                                <span class="px-3 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-300 rounded-full text-sm font-bold">
                                    NV@(Model.MaNhanVien.ToString("D4"))
                                </span>
                                <span class="px-3 py-1 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-300 rounded-full text-sm font-bold">
                                    Đang hoạt động
                                </span>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="space-y-4">
                            <div class="flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-xl">
                                <i class='bx bx-id-card text-blue-500 text-xl'></i>
                                <div>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">CCCD</p>
                                    <p class="font-semibold text-gray-900 dark:text-white">@(Model.CCCD ?? "Chưa cập nhật")</p>
                                </div>
                            </div>
                            <div class="flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-xl">
                                <i class='bx bx-calendar text-blue-500 text-xl'></i>
                                <div>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">Ngày sinh</p>
                                    <p class="font-semibold text-gray-900 dark:text-white">@(Model.NgaySinh?.ToString("dd/MM/yyyy") ?? "Chưa cập nhật")</p>
                                </div>
                            </div>
                        </div>
                        <div class="space-y-4">
                            <div class="flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-xl">
                                <i class='bx bx-map text-blue-500 text-xl'></i>
                                <div>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">Địa chỉ</p>
                                    <p class="font-semibold text-gray-900 dark:text-white">@(Model.DiaChi ?? "Chưa cập nhật")</p>
                                </div>
                            </div>
                            <div class="flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-xl">
                                <i class='bx bx-home text-blue-500 text-xl'></i>
                                <div>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">Quê quán</p>
                                    <p class="font-semibold text-gray-900 dark:text-white">@(Model.QueQuan ?? "Chưa cập nhật")</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Email và Tài khoản -->
                    <div class="mt-6 p-4 bg-gradient-to-r from-blue-500/10 to-purple-500/10 dark:from-blue-500/20 dark:to-purple-500/20 rounded-xl border border-blue-200/50 dark:border-blue-700/30">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="flex items-center gap-3">
                                <div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center">
                                    <i class='bx bx-envelope text-white text-xl'></i>
                                </div>
                                <div>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">Email</p>
                                    <p class="font-semibold text-gray-900 dark:text-white">@(Model.TaiKhoan?.Email ?? "Chưa cập nhật")</p>
                                </div>
                            </div>
                            <div class="flex items-center gap-3">
                                <div class="w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl flex items-center justify-center">
                                    <i class='bx bx-user-circle text-white text-xl'></i>
                                </div>
                                <div>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">Tài khoản</p>
                                    <p class="font-semibold text-gray-900 dark:text-white">@(Model.TaiKhoan?.UserName ?? "Chưa có")</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Work Information -->
            <div class="bg-gradient-to-br from-white to-amber-50 dark:from-gray-800 dark:to-amber-900/20 rounded-2xl shadow-2xl border border-amber-100/50 dark:border-amber-800/30 overflow-hidden">
                <div class="px-6 py-4 bg-gradient-to-r from-amber-500 to-orange-500">
                    <div class="flex items-center gap-3">
                        <div class="p-2 bg-white/20 rounded-xl backdrop-blur-sm border border-white/30">
                            <i class='bx bx-briefcase text-xl text-white'></i>
                        </div>
                        <div>
                            <h2 class="text-xl font-bold text-white">Thông Tin Công Việc</h2>
                            <p class="text-amber-100 text-sm">Thông tin làm việc và lương</p>
                        </div>
                    </div>
                </div>
                <div class="p-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="space-y-4">
                            <div class="flex items-center gap-3 p-3 bg-amber-50 dark:bg-amber-900/20 rounded-xl">
                                <i class='bx bx-calendar-check text-amber-500 text-xl'></i>
                                <div>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">Ngày vào làm</p>
                                    <p class="font-semibold text-gray-900 dark:text-white">@(Model.NgayVaoLam?.ToString("dd/MM/yyyy") ?? "Chưa cập nhật")</p>
                                </div>
                            </div>
                            <div class="flex items-center gap-3 p-3 bg-amber-50 dark:bg-amber-900/20 rounded-xl">
                                <i class='bx bx-time-five text-amber-500 text-xl'></i>
                                <div>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">Thâm niên</p>
                                    <p class="font-semibold text-gray-900 dark:text-white">
                                        @{
                                            var ngayVaoLam = Model.NgayVaoLam;
                                            if (ngayVaoLam.HasValue)
                                            {
                                                var years = DateTime.Now.Year - ngayVaoLam.Value.Year;
                                                <text>@years năm</text>
                                            }
                                            else
                                            {
                                                <text>0 năm</text>
                                            }
                                        }
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="space-y-4">
                            <div class="flex items-center gap-3 p-3 bg-amber-50 dark:bg-amber-900/20 rounded-xl">
                                <i class='bx bx-money text-amber-500 text-xl'></i>
                                <div>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">Lương cơ bản</p>
                                    <p class="font-semibold text-green-600 dark:text-green-400">@(Model.Luong?.ToString("N0") ?? "0") VNĐ</p>
                                </div>
                            </div>
                            <div class="flex items-center gap-3 p-3 bg-amber-50 dark:bg-amber-900/20 rounded-xl">
                                <i class='bx bx-trending-up text-amber-500 text-xl'></i>
                                <div>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">Bậc lương</p>
                                    <p class="font-semibold text-gray-900 dark:text-white">@(Model.BacLuong?.ToString() ?? "Chưa cập nhật")</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sidebar -->
        <div class="space-y-6">
            <!-- Statistics -->
            <div class="bg-gradient-to-br from-white to-green-50 dark:from-gray-800 dark:to-green-900/20 rounded-2xl shadow-2xl border border-green-100/50 dark:border-green-800/30 overflow-hidden">
                <div class="px-6 py-4 bg-gradient-to-r from-green-500 to-emerald-600">
                    <div class="flex items-center gap-3">
                        <div class="p-2 bg-white/20 rounded-xl backdrop-blur-sm border border-white/30">
                            <i class='bx bx-stats text-xl text-white'></i>
                        </div>
                        <div>
                            <h2 class="text-xl font-bold text-white">Thống Kê</h2>
                            <p class="text-green-100 text-sm">Hiệu suất công việc</p>
                        </div>
                    </div>
                </div>
                <div class="p-6">
                    <div class="grid grid-cols-2 gap-4">
                        <div class="text-center p-4 bg-white dark:bg-gray-700 rounded-xl shadow-lg">
                            <div class="w-12 h-12 bg-blue-500 rounded-xl flex items-center justify-center mx-auto mb-2">
                                <i class='bx bx-cart text-white text-xl'></i>
                            </div>
                            <p class="text-2xl font-bold text-gray-900 dark:text-white">@ViewBag.TongDonHang</p>
                            <p class="text-sm text-gray-600 dark:text-gray-400">Đơn hàng</p>
                        </div>
                        <div class="text-center p-4 bg-white dark:bg-gray-700 rounded-xl shadow-lg">
                            <div class="w-12 h-12 bg-green-500 rounded-xl flex items-center justify-center mx-auto mb-2">
                                <i class='bx bx-refresh text-white text-xl'></i>
                            </div>
                            <p class="text-2xl font-bold text-gray-900 dark:text-white">@ViewBag.TongPhieuTra</p>
                            <p class="text-sm text-gray-600 dark:text-gray-400">Phiếu trả</p>
                        </div>
                        <div class="text-center p-4 bg-white dark:bg-gray-700 rounded-xl shadow-lg">
                            <div class="w-12 h-12 bg-amber-500 rounded-xl flex items-center justify-center mx-auto mb-2">
                                <i class='bx bx-support text-white text-xl'></i>
                            </div>
                            <p class="text-2xl font-bold text-gray-900 dark:text-white">@ViewBag.TongChamSoc</p>
                            <p class="text-sm text-gray-600 dark:text-gray-400">Chăm sóc</p>
                        </div>
                        <div class="text-center p-4 bg-white dark:bg-gray-700 rounded-xl shadow-lg">
                            <div class="w-12 h-12 bg-purple-500 rounded-xl flex items-center justify-center mx-auto mb-2">
                                <i class='bx bx-time-five text-white text-xl'></i>
                            </div>
                            <p class="text-2xl font-bold text-gray-900 dark:text-white">
                                @{
                                    if (ngayVaoLam.HasValue)
                                    {
                                        var years = DateTime.Now.Year - ngayVaoLam.Value.Year;
                                        <text>@years</text>
                                    }
                                    else
                                    {
                                        <text>0</text>
                                    }
                                }
                            </p>
                            <p class="text-sm text-gray-600 dark:text-gray-400">Năm KN</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Actions -->
            <div class="bg-gradient-to-br from-white to-red-50 dark:from-gray-800 dark:to-red-900/20 rounded-2xl shadow-2xl border border-red-100/50 dark:border-red-800/30 overflow-hidden">
                <div class="px-6 py-4 bg-gradient-to-r from-red-500 to-rose-600">
                    <div class="flex items-center gap-3">
                        <div class="p-2 bg-white/20 rounded-xl backdrop-blur-sm border border-white/30">
                            <i class='bx bx-cog text-xl text-white'></i>
                        </div>
                        <div>
                            <h2 class="text-xl font-bold text-white">Thao Tác</h2>
                            <p class="text-red-100 text-sm">Quản lý nhân viên</p>
                        </div>
                    </div>
                </div>
                <div class="p-6 space-y-3">
                    <a href="@Url.Action("SuaNhanVien", new { id = Model.MaNhanVien })" class="w-full bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white font-semibold py-3 px-4 rounded-xl transition-all duration-300 hover:shadow-lg hover:scale-105 transform flex items-center justify-center gap-2">
                        <i class='bx bx-edit'></i>
                        Chỉnh sửa
                    </a>
                    <a href="@Url.Action("QuanLyNguoiDung")" class="w-full bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 font-semibold py-3 px-4 rounded-xl transition-all duration-300 hover:shadow-lg hover:scale-105 transform flex items-center justify-center gap-2">
                        <i class='bx bx-list-ul'></i>
                        Danh sách NV
                    </a>
                    <button onclick="deleteStaff(@Model.MaNhanVien, '@Model.HoTen')" class="w-full bg-gradient-to-r from-red-500 to-rose-500 hover:from-red-600 hover:to-rose-600 text-white font-semibold py-3 px-4 rounded-xl transition-all duration-300 hover:shadow-lg hover:scale-105 transform flex items-center justify-center gap-2">
                        <i class='bx bx-trash'></i>
                        Xóa nhân viên
                    </button>
                </div>
            </div>

            <!-- System Info -->
            <div class="bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-900/20 rounded-2xl shadow-2xl border border-gray-100/50 dark:border-gray-700/30 overflow-hidden">
                <div class="px-6 py-4 bg-gradient-to-r from-gray-500 to-gray-700">
                    <div class="flex items-center gap-3">
                        <div class="p-2 bg-white/20 rounded-xl backdrop-blur-sm border border-white/30">
                            <i class='bx bx-info-circle text-xl text-white'></i>
                        </div>
                        <div>
                            <h2 class="text-xl font-bold text-white">Thông Tin</h2>
                            <p class="text-gray-100 text-sm">Hệ thống</p>
                        </div>
                    </div>
                </div>
                <div class="p-6 space-y-3">
                    <div class="flex justify-between items-center">
                        <span class="text-sm text-gray-600 dark:text-gray-400">Ngày tạo:</span>
                        <span class="text-sm font-semibold text-gray-900 dark:text-white">@DateTime.Now.ToString("dd/MM/yyyy")</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-sm text-gray-600 dark:text-gray-400">Cập nhật:</span>
                        <span class="text-sm font-semibold text-gray-900 dark:text-white">@DateTime.Now.ToString("HH:mm dd/MM/yyyy")</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-sm text-gray-600 dark:text-gray-400">Trạng thái:</span>
                        <span class="px-2 py-1 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-300 rounded-full text-xs font-bold">Hoạt động</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div class="text-center">
        <small class="text-gray-500 dark:text-gray-400">
            <i class='bx bx-info-circle mr-1'></i>
            Chi tiết nhân viên • Mã: NV@(Model.MaNhanVien.ToString("D4")) • Cập nhật: @DateTime.Now.ToString("HH:mm dd/MM/yyyy")
        </small>
    </div>
</div>

<script>
    function deleteStaff(id, name) {
        if (confirm('Bạn có chắc muốn xóa nhân viên "' + name + '"?')) {
            window.location.href = '@Url.Action("XoaNhanVien", "User")/' + id;
        }
    }
</script>