@{
    ViewData["Title"] = "Giỏ Hàng";
}

<div class="container">
    <h3 class="header">Giỏ hàng <span class="count-product-shoping-cart">(1 sản phẩm)</span></h3>

    <div class="wrapper">
        <!-- Cart Content -->
        <div class="cart-content">
            <div class="cart-table">
                <!-- Table Header -->
                <div class="table-header">
                    <div class="col-checkbox">
                        <input type="checkbox" />
                    </div>
                    <label class="col-product">Sản phẩm <span class="count-product-shoping-cart">(1 sản phẩm)</span></label>
                    <label class="col-price">Giá</label>
                    <label class="col-quantity">Số lượng</label>
                    <label class="col-total">Thành tiền</label>
                    <label class="col-delete"></label>
                </div>

                <div class="table-row">
                    <div class="col-checkbox">
                        <input type="checkbox" />
                    </div>

                    <!-- Product Info -->
                    <div class="product-info">
                        <div class="product-image">
                            <img src="" alt="Name" />
                        </div>
                        <label class="product-name">Nguyễn Việt Tiến</label>
                    </div>

                    <!-- Price -->
                    <div class="price-column">
                        <label class="original-price">80.000<span class="currency-symbol">đ</span></label>
                        <label class="discount-price">48.000<span class="currency-symbol">đ</span></label>
                    </div>

                    <!-- Quantity -->
                    <div class="quantity-section-shoppingcart">
                        <div class="quantity-control-shoppingcart">
                            <button class="btn-qty-shoppingcart" onclick="decreaseQty()">-</button>
                            <input type="text" id="qtyShoppingCart" value="1" maxvalue="999" readonly>
                            <button class="btn-qty-shoppingcart" onclick="increaseQty()">+</button>
                        </div>
                    </div>

                    <!-- Total -->
                    <label class="total-price">48.000<span class="currency-symbol">đ</span></label>

                    <!-- Delete -->
                    <button class="delete-btn"><i class="fi fi-rs-trash"></i></button>
                </div>
            </div>
        </div>

        <!-- Sidebar Payment -->
        <div class="sidebar">
            <div class="payment-box">
                <div class="payment-title">THANH TOÁN</div>

                <div class="payment-row">
                    <span class="payment-label">Thành tiền</span>
                    <span class="payment-value">48.000<span class="currency-symbol">đ</span></span>
                </div>

                <div class="payment-row">
                    <span class="payment-label">Phí vận chuyển</span>
                    <span class="payment-value">48.000<span class="currency-symbol">đ</span></span>
                </div>

                <div class="payment-divider"></div>

                <div class="payment-total">
                    <span class="payment-total-label">Tổng Số Tiền: </span>
                    <span class="payment-total-value">48.000<span class="currency-symbol">đ</span></span>
                </div>

                <button class="checkout-btn disabledBtn">THANH TOÁN</button>
                <span class="payment-note">(Giảm giá trên web chỉ áp dụng cho bán lẻ)</span>
            </div>
        </div>
    </div>
</div>
@section Scripts {
    <script>
        // Lấy các phần tử cần thiết
        const checkoutBtn = document.querySelector('.checkout-btn');
        const headerCheckbox = document.querySelector('.table-header .col-checkbox input[type="checkbox"]');
        const productCheckboxes = document.querySelectorAll('.table-row .col-checkbox input[type="checkbox"]');

        // Hàm cập nhật trạng thái nút THANH TOÁN
        function updateCheckoutBtn() {
            // Kiểm tra xem có checkbox sản phẩm nào được chọn không
            const anyChecked = Array.from(productCheckboxes).some(cb => cb.checked);

            if (anyChecked) {
                checkoutBtn.classList.remove('disabledBtn');
            } else {
                checkoutBtn.classList.add('disabledBtn');
            }
        }

        // Event: khi click checkbox từng sản phẩm
        productCheckboxes.forEach(cb => {
            cb.addEventListener('change', () => {
                updateCheckoutBtn();

                // Nếu tất cả sản phẩm được chọn thì check header checkbox, ngược lại bỏ check
                const allChecked = Array.from(productCheckboxes).every(cb => cb.checked);
                headerCheckbox.checked = allChecked;
            });
        });

        // Event: khi click checkbox ở header
        headerCheckbox.addEventListener('change', () => {
            const isChecked = headerCheckbox.checked;
            productCheckboxes.forEach(cb => cb.checked = isChecked);
            updateCheckoutBtn();
        });

        // Khởi tạo trạng thái ban đầu
        updateCheckoutBtn();

        function increaseQty() {
            const input = document.getElementById('qtyShoppingCart');
            let value = parseInt(input.value);
            input.value = value + 1;
        }

        function decreaseQty() {
            const input = document.getElementById('qtyShoppingCart');
            let value = parseInt(input.value);
            if (value > 1) {
                input.value = value - 1;
            }
        }
    </script>
}